{"remainingRequest":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\learn\\learn_work_spaces\\minproject\\src\\views\\rules\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\learn\\learn_work_spaces\\minproject\\src\\views\\rules\\index.vue","mtime":1599572185700},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFJ1bGUsIHNldEhvdFJ1bGUsIHVwZGF0ZUhvdFJ1bGUgfSBmcm9tICdAL2FwaS9ob3QnCgpleHBvcnQgZGVmYXVsdCB7CiAgZmlsdGVyczogewogICAgc3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICBjb25zdCBzdGF0dXNNYXAgPSB7CiAgICAgICAgcHVibGlzaGVkOiAnc3VjY2VzcycsCiAgICAgICAgZHJhZnQ6ICdncmF5JywKICAgICAgICBkZWxldGVkOiAnZGFuZ2VyJwogICAgICB9CiAgICAgIHJldHVybiBzdGF0dXNNYXBbc3RhdHVzXQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBydWxlRm9ybTogewogICAgICAgIHJlZnJlc2hDeWNsZTogMSwKICAgICAgICBob3ROdW06IDEwCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGEoKSB7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiA5OTksCiAgICAgICAgcGFyYW06IHt9CiAgICAgIH0KICAgICAgZ2V0UnVsZShwYXJhbXMpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5yZWNvcmRzCiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgaWYgKHRoaXMubGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICBzZXRIb3RSdWxlKHRoaXMucnVsZUZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSkKICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXBkYXRlSG90UnVsZSh7IC4uLnRoaXMucnVsZUZvcm0sIGlkOiB0aGlzLmxpc3RbMF0uaWQgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKQogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgfSkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/rules","sourcesContent":["c<template>\n  <div class=\"app-container\">\n    <el-button type=\"primary\" @click=\"dialogFormVisible = true\"\n      >添加规则</el-button\n    >\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      element-loading-text=\"Loading\"\n      border\n      fit\n      highlight-current-row\n      style=\"margin-top:15px;\"\n    >\n      <el-table-column align=\"center\" label=\"ID\" width=\"95\">\n        <template slot-scope=\"scope\">{{ scope.row.id }}</template>\n      </el-table-column>\n      <el-table-column label=\"更新频率\">\n        <template slot-scope=\"scope\">{{ scope.row.refreshCycle }}</template>\n      </el-table-column>\n      <el-table-column label=\"返回数量\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.hotNum }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"添加热词\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"ruleForm\">\n        <el-form-item label=\"更新频率\">\n          <el-input v-model=\"ruleForm.refreshCycle\" />\n        </el-form-item>\n        <el-form-item label=\"返回数量\">\n          <el-input v-model=\"ruleForm.hotNum\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\"\n          >确 定</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getRule, setHotRule, updateHotRule } from '@/api/hot'\n\nexport default {\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      list: [],\n      listLoading: true,\n      dialogFormVisible: false,\n      ruleForm: {\n        refreshCycle: 1,\n        hotNum: 10\n      }\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      const params = {\n        pageNum: 1,\n        pageSize: 999,\n        param: {}\n      }\n      getRule(params).then(res => {\n        this.list = res.data.records\n        this.listLoading = false\n      })\n    },\n    save() {\n      if (this.list.length === 0) {\n        setHotRule(this.ruleForm).then(res => {\n          this.$message.success(res.message)\n          this.dialogFormVisible = false\n          this.fetchData()\n        })\n      } else {\n        updateHotRule({ ...this.ruleForm, id: this.list[0].id }).then(res => {\n          this.$message.success(res.message)\n          this.dialogFormVisible = false\n          this.fetchData()\n        })\n      }\n    }\n  }\n}\n</script>\n"]}]}