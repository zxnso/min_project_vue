{"remainingRequest":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\babel-loader\\lib\\index.js!E:\\learn\\learn_work_spaces\\minproject\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\learn\\learn_work_spaces\\minproject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\learn\\learn_work_spaces\\minproject\\src\\views\\rules\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\learn\\learn_work_spaces\\minproject\\src\\views\\rules\\index.vue","mtime":1599572185700},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\learn\\learn_work_spaces\\minproject\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovbGVhcm4vbGVhcm5fd29ya19zcGFjZXMvbWlucHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdldFJ1bGUsIHNldEhvdFJ1bGUsIHVwZGF0ZUhvdFJ1bGUgfSBmcm9tICdAL2FwaS9ob3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgZmlsdGVyczogewogICAgc3RhdHVzRmlsdGVyOiBmdW5jdGlvbiBzdGF0dXNGaWx0ZXIoc3RhdHVzKSB7CiAgICAgIHZhciBzdGF0dXNNYXAgPSB7CiAgICAgICAgcHVibGlzaGVkOiAnc3VjY2VzcycsCiAgICAgICAgZHJhZnQ6ICdncmF5JywKICAgICAgICBkZWxldGVkOiAnZGFuZ2VyJwogICAgICB9OwogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c107CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgcmVmcmVzaEN5Y2xlOiAxLAogICAgICAgIGhvdE51bTogMTAKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBhZ2VTaXplOiA5OTksCiAgICAgICAgcGFyYW06IHt9CiAgICAgIH07CiAgICAgIGdldFJ1bGUocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzLmRhdGEucmVjb3JkczsKICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgc2V0SG90UnVsZSh0aGlzLnJ1bGVGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTsKCiAgICAgICAgICBfdGhpczIuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczIuZmV0Y2hEYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXBkYXRlSG90UnVsZShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMucnVsZUZvcm0pLCB7fSwgewogICAgICAgICAgaWQ6IHRoaXMubGlzdFswXS5pZAogICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKTsKCiAgICAgICAgICBfdGhpczIuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpczIuZmV0Y2hEYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,SAAA,OAAA,EAAA,UAAA,EAAA,aAAA,QAAA,WAAA;AAEA,eAAA;AACA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,MADA,EACA;AACA,UAAA,SAAA,GAAA;AACA,QAAA,SAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,OAAA,EAAA;AAHA,OAAA;AAKA,aAAA,SAAA,CAAA,MAAA,CAAA;AACA;AARA,GADA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,iBAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA;AACA,QAAA,YAAA,EAAA,CADA;AAEA,QAAA,MAAA,EAAA;AAFA;AAJA,KAAA;AASA,GArBA;AAsBA,EAAA,OAtBA,qBAsBA;AACA,SAAA,SAAA;AACA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,WAAA,WAAA,GAAA,IAAA;AACA,UAAA,MAAA,GAAA;AACA,QAAA,OAAA,EAAA,CADA;AAEA,QAAA,QAAA,EAAA,GAFA;AAGA,QAAA,KAAA,EAAA;AAHA,OAAA;AAKA,MAAA,OAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA;AACA,OAHA;AAIA,KAZA;AAaA,IAAA,IAbA,kBAaA;AAAA;;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,QAAA,UAAA,CAAA,KAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,OAAA;;AACA,UAAA,MAAA,CAAA,iBAAA,GAAA,KAAA;;AACA,UAAA,MAAA,CAAA,SAAA;AACA,SAJA;AAKA,OANA,MAMA;AACA,QAAA,aAAA,iCAAA,KAAA,QAAA;AAAA,UAAA,EAAA,EAAA,KAAA,IAAA,CAAA,CAAA,EAAA;AAAA,WAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,OAAA;;AACA,UAAA,MAAA,CAAA,iBAAA,GAAA,KAAA;;AACA,UAAA,MAAA,CAAA,SAAA;AACA,SAJA;AAKA;AACA;AA3BA;AAzBA,CAAA","sourcesContent":["c<template>\n  <div class=\"app-container\">\n    <el-button type=\"primary\" @click=\"dialogFormVisible = true\"\n      >添加规则</el-button\n    >\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      element-loading-text=\"Loading\"\n      border\n      fit\n      highlight-current-row\n      style=\"margin-top:15px;\"\n    >\n      <el-table-column align=\"center\" label=\"ID\" width=\"95\">\n        <template slot-scope=\"scope\">{{ scope.row.id }}</template>\n      </el-table-column>\n      <el-table-column label=\"更新频率\">\n        <template slot-scope=\"scope\">{{ scope.row.refreshCycle }}</template>\n      </el-table-column>\n      <el-table-column label=\"返回数量\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.hotNum }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"添加热词\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"ruleForm\">\n        <el-form-item label=\"更新频率\">\n          <el-input v-model=\"ruleForm.refreshCycle\" />\n        </el-form-item>\n        <el-form-item label=\"返回数量\">\n          <el-input v-model=\"ruleForm.hotNum\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\"\n          >确 定</el-button\n        >\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getRule, setHotRule, updateHotRule } from '@/api/hot'\n\nexport default {\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'gray',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      list: [],\n      listLoading: true,\n      dialogFormVisible: false,\n      ruleForm: {\n        refreshCycle: 1,\n        hotNum: 10\n      }\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      this.listLoading = true\n      const params = {\n        pageNum: 1,\n        pageSize: 999,\n        param: {}\n      }\n      getRule(params).then(res => {\n        this.list = res.data.records\n        this.listLoading = false\n      })\n    },\n    save() {\n      if (this.list.length === 0) {\n        setHotRule(this.ruleForm).then(res => {\n          this.$message.success(res.message)\n          this.dialogFormVisible = false\n          this.fetchData()\n        })\n      } else {\n        updateHotRule({ ...this.ruleForm, id: this.list[0].id }).then(res => {\n          this.$message.success(res.message)\n          this.dialogFormVisible = false\n          this.fetchData()\n        })\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/rules"}]}